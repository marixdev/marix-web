# WebSocket 클라이언트

실시간 양방향 통신을 위해 WebSocket 서버에 연결합니다. API 테스트, 실시간 피드 디버깅 또는 WebSocket 서비스 모니터링에 완벽합니다.

## WebSocket 클라이언트 인터페이스

![WebSocket Interface](/websocket.png)

## WebSocket 서버 추가

1. **"호스트 추가"** 클릭
2. **프로토콜** 선택: WebSocket (WSS)
3. 입력:
   - **이름**: 연결의 표시 이름
   - **URL**: WebSocket 서버 주소
   - **헤더**: (선택 사항) 인증을 위한 사용자 정의 헤더
4. **생성** 클릭

### URL 형식

| 형식 | 예시 |
|--------|---------|
| 프로토콜 포함 | `wss://api.example.com/ws` |
| 프로토콜 없음 | `api.example.com/ws` (자동으로 `wss://` 추가) |
| 포트 포함 | `wss://localhost:8080/socket` |
| 경로 포함 | `wss://stream.example.com/v1/feed` |

> **참고:** 프로토콜이 지정되지 않으면 Marix가 보안 WebSocket 연결을 위해 자동으로 `wss://`를 추가합니다.

## 연결

1. 호스트 목록에서 WebSocket 서버를 더블 클릭
2. 연결 대기 (시간 초과: 15초)
3. 상태 표시기에 연결 상태 표시

### 연결 상태

| 상태 | 표시기 | 설명 |
|--------|-----------|-------------|
| 연결 중 | 🟡 노란색 | 연결 설정 중 |
| 연결됨 | 🟢 녹색 | 송수신 준비 완료 |
| 연결 끊김 | ⚪ 회색 | 연결 종료됨 |
| 오류 | 🔴 빨간색 | 연결 실패 |

## 메시지 보내기

1. 하단의 입력 영역에 메시지 입력
2. **Enter** 누르기 또는 **보내기** 클릭
3. 보낸 메시지는 ↑ 화살표 (녹색)와 함께 표시

### 지원되는 메시지 형식

- 일반 텍스트
- JSON (가독성을 위해 포맷됨)
- 모든 문자열 데이터

## 메시지 수신

- 수신 메시지는 ↓ 화살표 (보라색)와 함께 자동 표시
- JSON 메시지는 적절한 들여쓰기로 자동 포맷
- 타임스탬프는 각 메시지 수신 시간 표시
- 메시지 기록은 세션당 최대 1000개 유지

## 컨트롤

| 컨트롤 | 기능 |
|---------|----------|
| **보내기** | 서버에 메시지 보내기 |
| **지우기** | 보기에서 모든 메시지 지우기 |
| **연결 끊기** | 연결 닫기 |
| **재연결** | 연결 끊김/오류 후 재연결 |
| **테마 선택기** | 뷰어 색상 테마 변경 |

## 키보드 단축키

| 단축키 | 동작 |
|----------|--------|
| `Enter` | 메시지 보내기 |
| `Shift+Enter` | 메시지에 새 줄 |

## 기능

### 자동 스크롤

- 기본적으로 활성화
- 자동으로 최신 메시지로 스크롤
- 이전 메시지 검토를 위해 끄기 가능
- 하단에 메시지 수 표시

### 테마 지원

- 400개 이상의 터미널 테마 사용 가능
- 헤더에서 테마 선택기 클릭
- 테마가 전체 뷰어에 적용
- 밝은/어두운 테마에 맞게 색상 조정

### JSON 포맷

JSON 메시지 수신 시:
```json
{"event":"update","data":{"id":1,"value":"test"}}
```

Marix가 자동으로 다음과 같이 포맷:
```json
{
  "event": "update",
  "data": {
    "id": 1,
    "value": "test"
  }
}
```

## 사용 사례

### API 테스트

개발 중 WebSocket API 테스트:
- 테스트 페이로드 보내기
- 응답 모니터링
- 연결 문제 디버깅

### 실시간 데이터 모니터링

실시간 피드 모니터링:
- 주가 업데이트
- 채팅 애플리케이션
- IoT 센서 데이터
- 게임 서버 이벤트

### 디버깅

WebSocket 구현 디버깅:
- 메시지 형식 확인
- 연결 안정성 확인
- 재연결 로직 테스트

## 문제 해결

### 연결 시간 초과

- URL이 올바른지 확인
- 서버가 실행 중인지 확인
- 방화벽/프록시 설정 확인
- 명시적인 `wss://` 프로토콜로 시도

### 연결 거부됨

- 서버가 연결을 수락하지 않을 수 있음
- 잘못된 포트 번호
- SSL/TLS 인증서 문제
- 서버에 인증 헤더 필요

### 메시지가 보내지지 않음

- 연결 상태가 "연결됨"인지 확인
- 메시지 형식이 서버 기대에 맞는지 확인
- 서버 로그에서 오류 확인

### 예기치 않게 연결 끊김

- 서버가 연결을 닫았을 수 있음
- 네트워크 중단
- 서버 측 유휴 시간 초과
- **재연결**을 클릭하여 연결 복원
