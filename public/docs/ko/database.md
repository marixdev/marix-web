# 데이터베이스 클라이언트

Marix에는 애플리케이션에서 직접 데이터베이스 서버에 연결하고 관리할 수 있는 내장 데이터베이스 클라이언트가 포함되어 있습니다.

## 데이터베이스 클라이언트 인터페이스

![Database Client Interface](/database.png)

---

## 지원되는 데이터베이스

| 데이터베이스 | 프로토콜 | 기능 |
|----------|----------|----------|
| **MySQL / MariaDB** | `mysql` | 쿼리 편집기, 테이블 브라우저, 데이터 뷰어, 구조 검사기 |
| **PostgreSQL** | `postgresql` | 쿼리 편집기, 테이블 브라우저, 데이터 뷰어, 구조 검사기 |
| **MongoDB** | `mongodb` | 컬렉션 브라우저, 문서 뷰어, 쿼리 인터페이스 |
| **Redis** | `redis` | 키-값 브라우저, 명령 인터페이스 |
| **SQLite** | `sqlite` | 로컬 파일 지원, 전체 SQL 편집기 |

---

## 데이터베이스 서버 추가

1. 사이드바에서 **+ 추가** 버튼 클릭
2. **데이터베이스** 탭 (또는 데이터베이스 아이콘) 선택
3. 데이터베이스 유형 선택

### MySQL / MariaDB / PostgreSQL

| 필드 | 설명 | 예시 |
|-------|-------------|---------|
| 이름 | 표시 이름 | `프로덕션 MySQL` |
| 호스트 | 서버 호스트명 또는 IP | `db.example.com` |
| 포트 | 데이터베이스 포트 | `3306` (MySQL) / `5432` (PostgreSQL) |
| 사용자명 | 데이터베이스 사용자 | `root` |
| 비밀번호 | 사용자 비밀번호 | `••••••••` |
| 데이터베이스 | 기본 데이터베이스 (선택 사항) | `myapp_production` |
| SSL | SSL/TLS 활성화 | ☑️ 활성화됨 |

### MongoDB

| 필드 | 설명 | 예시 |
|-------|-------------|---------|
| 이름 | 표시 이름 | `MongoDB Atlas` |
| 연결 문자열 | 전체 MongoDB URI | `mongodb+srv://user:pass@cluster.mongodb.net/` |
| 호스트 | 서버 호스트명 | `localhost` |
| 포트 | MongoDB 포트 | `27017` |
| 데이터베이스 | 기본 데이터베이스 | `myapp` |

### Redis

| 필드 | 설명 | 예시 |
|-------|-------------|---------|
| 이름 | 표시 이름 | `Redis 캐시` |
| 호스트 | 서버 호스트명 | `redis.example.com` |
| 포트 | Redis 포트 | `6379` |
| 비밀번호 | 인증 비밀번호 (선택 사항) | `••••••••` |
| 데이터베이스 | 데이터베이스 번호 | `0` |

### SQLite

| 필드 | 설명 | 예시 |
|-------|-------------|---------|
| 이름 | 표시 이름 | `로컬 SQLite` |
| 파일 경로 | .db 파일 경로 | `/home/user/app.db` |

---

## 데이터베이스 클라이언트 인터페이스

### 📊 데이터 탭

테이블 데이터 탐색 및 보기:

- 드롭다운에서 **데이터베이스 선택** (여러 개인 경우)
- 사이드바에서 **테이블 클릭**하여 데이터 보기
- **페이지네이션** - 행 탐색 (기본값 페이지당 100개)
- **열 정렬** - 열 헤더 클릭하여 정렬
- **빠른 필터** - 표시된 데이터 내 검색

### ⚡ 쿼리 탭

SQL 쿼리 작성 및 실행:

- **구문 강조** - SQL 키워드, 문자열, 숫자
- **실행** - `Ctrl+Enter` 또는 실행 버튼으로 쿼리 실행
- **결과 그리드** - 테이블에서 쿼리 결과 보기
- **내보내기** - 결과를 CSV 또는 JSON으로 다운로드
- **실행 시간** - 쿼리 소요 시간 확인

### 🏗️ 구조 탭

테이블 스키마 검사:

- 열 이름 및 데이터 유형
- 기본 키, 외래 키, 고유 제약 조건
- Null 허용 열 및 기본값
- 자동 증가 설정

### 🔗 ERD 탭

엔티티-관계 다이어그램 보기:

- 테이블 및 관계의 시각적 표현
- 외래 키 연결이 선으로 표시됨
- 드래그 및 줌으로 대형 스키마 탐색
- 이미지로 내보내기 (PNG)

---

## 키보드 단축키

| 단축키 | 동작 |
|----------|--------|
| `Ctrl/Cmd + Enter` | 쿼리 실행 |
| `Ctrl/Cmd + S` | 쿼리를 파일로 저장 |
| `Ctrl/Cmd + O` | 파일에서 쿼리 열기 |
| `Ctrl/Cmd + Shift + F` | SQL 포맷 |
| `Escape` | 실행 중인 쿼리 취소 |

---

## 연결 보안

### SSL/TLS 암호화

서버 추가 시 **SSL** 체크박스 활성화. 사용자 정의 인증서의 경우:

- CA 인증서 경로
- 클라이언트 인증서 경로 (선택 사항)
- 클라이언트 키 경로 (선택 사항)

### SSH 터널

SSH 터널을 통해 연결:

1. 먼저 Marix에 SSH 서버 추가
2. 데이터베이스 추가 시 **SSH 터널** 활성화
3. 터널링할 SSH 서버 선택

---

## 모범 사례

1. **읽기 전용 계정 사용** - 제한된 권한의 데이터베이스 사용자 생성
2. **결과 집합 제한** - 항상 `LIMIT`를 사용하여 너무 많은 데이터 로딩 방지
3. **실행 전 테스트** - `UPDATE` 또는 `DELETE`의 경우 먼저 `SELECT` 실행
4. **트랜잭션 사용** - 중요한 작업의 경우 트랜잭션으로 래핑

---

## 문제 해결

| 문제 | 해결책 |
|-------|----------|
| 연결 실패 | 호스트/포트, 자격 증명, 방화벽, SSL 설정 확인 |
| 쿼리 시간 초과 | LIMIT 추가, 인덱스 확인, 서버 부하 확인 |
| 권한 거부됨 | 권한, 데이터베이스 접근, 관리자에게 문의 |
| SSL 인증서 오류 | SSL 비활성화, 인증서 유효성 확인, CA 인증서 추가 |
