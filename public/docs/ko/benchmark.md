# 서버 벤치마크

SSH 터미널에서 직접 시스템, 디스크, 네트워크의 종합적인 벤치마크로 서버 성능을 테스트하고 측정합니다.

## 서버 벤치마크 인터페이스

![서버 벤치마크 인터페이스](/benchmark.png)

## 개요

서버 벤치마크 기능은 원격 서버의 완전한 성능 분석을 제공합니다:

- **시스템 정보**: 하드웨어 및 소프트웨어 세부 정보
- **디스크 성능**: 순차 읽기/쓰기 속도, I/O 레이턴시, 랜덤 IOPS
- **네트워크 속도**: 다운로드, 업로드, 레이턴시 측정을 포함한 다중 지역 속도 테스트

## 사용 방법

### 벤치마크 시작

1. SSH를 통해 서버에 연결
2. 터미널 하단의 **📊 Benchmark** 버튼 클릭
3. (선택 사항) **"Upload to paste.dev"**를 체크하여 결과를 온라인으로 공유
4. **Start Benchmark** 클릭

### 벤치마크 단계

벤치마크는 4단계로 실행됩니다:

| 단계 | 설명 | 소요 시간 |
|------|------|-----------|
| 1. 시스템 정보 | OS, CPU, RAM, 디스크 정보 수집 | ~2초 |
| 2. 디스크 테스트 | dd, ioping, fio 테스트 실행 | ~45초 |
| 3. 네트워크 테스트 | 18개 글로벌 지역에 대한 속도 테스트 | ~3-5분 |
| 4. 완료 | 결과 및 내보내기 옵션 표시 | - |

## 벤치마크 세부 정보

### 시스템 정보

수집되는 데이터:

| 필드 | 설명 |
|------|------|
| OS | 운영 체제 이름 및 버전 |
| Kernel | Linux 커널 버전 |
| Architecture | CPU 아키텍처 (x86_64, arm64 등) |
| Hostname | 서버 호스트명 |
| CPU Model | 프로세서 이름 및 사양 |
| CPU Cores | CPU 코어 수 |
| CPU Frequency | 현재 CPU 주파수 |
| Memory | 사용 중 / 전체 RAM |
| Swap | 사용 중 / 전체 스왑 공간 |
| Disk | 사용 중 / 전체 디스크 공간 |
| Uptime | 서버 가동 시간 |
| Load Average | 1/5/15분 평균 부하 |
| Virtualization | VM 유형 (KVM, VMware, OpenVZ 등) |

### 디스크 성능

#### 순차 쓰기/읽기 (dd)

- **방법**: `dd if=/dev/zero of=test bs=64k count=16k conv=fdatasync`
- **실행 횟수**: 3회, 정확도를 위해 평균화
- **테스트 위치**: 홈 디렉토리 (tmpfs를 피하기 위해 /tmp 제외)
- **측정**: MB/s 또는 GB/s 단위의 순차 처리량

#### I/O 레이턴시 (ioping)

- **방법**: `ioping -c 10 -q /`
- **측정**: 마이크로초 단위의 디스크 I/O 응답 시간
- **대상**: 실제 디스크 레이턴시를 위한 루트 파일 시스템

#### 랜덤 4K IOPS (fio)

- **방법**: 4K 랜덤 읽기/쓰기, 큐 깊이 64의 fio
- **실행 시간**: 30초
- **측정**:
  - Read IOPS
  - Write IOPS
  - Read Bandwidth
  - Write Bandwidth

> **참고**: `fio` 또는 `ioping`이 설치되지 않은 경우 벤치마크가 자동으로 설치를 시도합니다.

### 네트워크 속도

테스트는 18개 글로벌 지역의 Speedtest.net 서버를 대상으로 수행됩니다:

| 지역 | 위치 |
|------|------|
| 아시아 | 싱가포르, 도쿄, 홍콩, 서울, 뭄바이 |
| 유럽 | 런던, 프랑크푸르트, 파리, 암스테르담 |
| 아메리카 | 로스앤젤레스, 뉴욕, 시카고, 토론토, 상파울루 |
| 오세아니아 | 시드니, 오클랜드 |
| 중동/아프리카 | 두바이, 요하네스버그 |

각 서버에 대해 벤치마크는 다음을 측정합니다:
- **다운로드 속도**: MB/s 또는 Gbps
- **업로드 속도**: MB/s 또는 Gbps
- **레이턴시**: 밀리초 단위의 왕복 시간

## 내보내기 옵션

벤치마크 완료 후 여러 형식으로 결과를 내보낼 수 있습니다:

### 🌐 HTML

스타일이 적용된 레이아웃의 독립형 HTML 파일. 특징:
- 다크 테마 디자인
- 반응형 레이아웃
- 카드 형태로 모든 벤치마크 데이터 표시
- marix.dev 및 GitHub 링크가 포함된 푸터

### 📋 JSON

구조화된 JSON 데이터:
- 완전한 벤치마크 결과
- 타임스탬프
- 웹사이트 및 GitHub 링크가 포함된 메타 객체
- 자동화를 위한 기계 판독 가능 형식

### 🖼️ PNG

고해상도 이미지 스크린샷:
- 레티나 디스플레이용 2배 스케일
- RGB 색상 (html2canvas 호환)
- 모든 섹션 포함
- 브랜딩이 포함된 푸터

### 📄 TXT

ASCII 아트 형식의 텍스트 파일:
- 테이블용 박스 문자
- 복사-붙여넣기 편리
- 터미널 스타일 출력
- 링크가 포함된 푸터

## paste.dev 통합

한 번의 클릭으로 벤치마크 결과를 온라인으로 공유:

### 작동 방식

1. 벤치마크 시작 전 **"Upload to paste.dev"** 체크
2. 벤치마크 실행
3. 완료 후 결과가 자동으로 업로드됨
4. **Copy** 및 **Open** 버튼이 있는 공유 가능한 링크 표시

### 기능

- **자동 업로드**: 벤치마크 완료 시 TXT 형식 업로드
- **링크 복사**: 📋 Copy를 클릭하여 URL을 클립보드에 복사
- **링크 열기**: 🔗 Open을 클릭하여 브라우저에서 보기
- **공개 공유**: 링크가 있는 누구나 결과 확인 가능

## 요구 사항

### 서버 요구 사항

| 도구 | 목적 | 자동 설치 |
|------|------|-----------|
| `dd` | 디스크 읽기/쓰기 속도 | 보통 사전 설치됨 |
| `ioping` | I/O 레이턴시 측정 | ✅ 예 |
| `fio` | 랜덤 IOPS 테스트 | ✅ 예 |
| `curl` | 네트워크 속도 테스트 | 보통 사전 설치됨 |

### 지원되는 패키지 관리자

자동 설치가 지원되는 패키지 관리자:
- **apt** (Debian, Ubuntu)
- **yum** (CentOS, RHEL)
- **dnf** (Fedora)
- **pacman** (Arch Linux)
- **apk** (Alpine Linux)
- **zypper** (openSUSE)

## 문제 해결

### 디스크 테스트에서 비현실적인 속도 표시 (5+ GB/s)

**원인**: `/tmp`가 tmpfs(RAM 디스크)로 마운트됨

**해결책**: 벤치마크가 이를 자동으로 감지하고 대신 홈 디렉토리를 사용합니다.

### 네트워크 테스트 시간이 너무 오래 걸림

**원인**: 일부 지역이 느리거나 도달 불가능

**해결책**: 벤치마크는 여러 지역을 테스트합니다. 느린 지역은 30초 후 타임아웃됩니다.

### 도구 설치 시 "Permission Denied" 오류

**원인**: 사용자에게 sudo 액세스 권한 없음

**해결책**: 서버 관리자에게 `fio` 및 `ioping` 설치를 요청하세요:

```bash
# Debian/Ubuntu
sudo apt install fio ioping

# CentOS/RHEL
sudo yum install fio ioping

# Fedora
sudo dnf install fio ioping
```

### PNG 내보내기 오류 "oklch"

**원인**: html2canvas가 oklch 색상 형식을 지원하지 않음

**해결책**: v1.0.19에서 수정됨. PNG는 이제 RGB 16진수 색상을 사용합니다.

## 출력 예시

### TXT 형식 샘플

```
════════════════════════════════════════════════════════════
  MARIX SERVER BENCHMARK - my-server.com
  1/29/2026, 10:30:45 AM
════════════════════════════════════════════════════════════

┌────────────────────────────────────────────────────────────┐
│                    SYSTEM INFORMATION                      │
└────────────────────────────────────────────────────────────┘
  OS            : Ubuntu 22.04.3 LTS
  CPU           : AMD EPYC 7B13 64-Core Processor
  CPU Cores     : 4
  Memory        : 2.1 GB / 8.0 GB (26%)
  Disk          : 45 GB / 160 GB (28%)
  Virtualization: KVM

┌────────────────────────────────────────────────────────────┐
│                    DISK PERFORMANCE                        │
└────────────────────────────────────────────────────────────┘
  Sequential Write : 580 MB/s
  Sequential Read  : 1.2 GB/s
  I/O Latency      : 227 µs

  Random 4K IOPS (fio):
    Read IOPS   : 45,230
    Write IOPS  : 15,076
    Read BW     : 176.7 MB/s
    Write BW    : 58.9 MB/s

┌────────────────────────────────────────────────────────────┐
│                    NETWORK SPEED                           │
└────────────────────────────────────────────────────────────┘
  Singapore    : ↓ 892 Mbps  ↑ 456 Mbps  (12ms)
  Tokyo        : ↓ 756 Mbps  ↑ 389 Mbps  (45ms)
  Frankfurt    : ↓ 234 Mbps  ↑ 178 Mbps  (156ms)
  ...

────────────────────────────────────────────────────────────
  marix.dev | https://github.com/marixdev/marix
  Generated by Marix SSH Client v1.0.19
────────────────────────────────────────────────────────────
```

## 보안 참고 사항

- 벤치마크는 SSH를 통해 원격 서버에서 명령을 실행합니다
- Speedtest.net(속도 테스트용)을 제외하고 외부 서버로 데이터가 전송되지 않습니다
- paste.dev 업로드는 선택 사항이며 사용자가 시작합니다
- 임시 테스트 파일은 벤치마크 후 자동으로 정리됩니다
