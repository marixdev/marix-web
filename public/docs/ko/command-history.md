# 명령어 기록 (명령어 리콜)

Marix는 각 서버에 대해 이전에 실행된 명령어를 저장하고 불러오는 **명령어 기록** 기능을 제공합니다. 이를 통해 다시 입력하지 않고도 일반적인 명령어를 빠르게 다시 실행할 수 있습니다.

## 명령어 기록 인터페이스

![명령어 기록 인터페이스](/cmh.png)

## 기능

- **서버별 기록**: 각 서버는 자체 명령어 기록을 유지합니다
- **로컬 저장소만**: 명령어는 로컬에만 저장되며 동기화되거나 백업되지 않습니다
- **민감한 데이터 필터링**: 비밀번호, 토큰 또는 비밀을 포함하는 명령어를 자동으로 필터링합니다
- **LRU 정리**: 오래된 명령어를 자동으로 제거합니다 (서버당 최대 50개)
- **실행 카운터**: 각 명령어가 사용된 횟수를 추적합니다
- **검색**: 퍼지 검색으로 명령어를 빠르게 필터링합니다

## 활성화 방법

명령어 기록은 개인 정보 보호를 위해 **기본적으로 비활성화**되어 있습니다. 활성화하려면:

1. **설정** 열기 (사이드바의 톱니바퀴 아이콘)
2. **터미널** 섹션으로 이동
3. **명령어 리콜 활성화** 토글

## 사용법

### 명령어 기록 열기

터미널 세션에서 다음을 누릅니다:
- 터미널 입력이 비어 있을 때 (빈 줄에 커서) **`Tab`** 키
- 또는 터미널 도구 모음에서 **기록** 버튼 클릭

### 키보드 단축키

| 키 | 동작 |
|-----|--------|
| `Tab` (빈 입력) | 명령어 리콜 팝업 열기 |
| `↑` / `↓` | 명령어 탐색 |
| `Enter` | 선택한 명령어 실행 |
| `Escape` | 팝업 닫기 |
| `Delete` / `Backspace` | 선택한 명령어 삭제 |

### 팝업 동작

- 명령어를 **클릭**하여 즉시 실행
- 검색 상자에 입력하여 **검색**
- 휴지통 아이콘으로 개별 명령어 **삭제**
- **스니펫으로 저장**하여 명령어를 재사용 가능한 스니펫으로 변환

## 개인정보 및 보안

### 필터링된 명령어

다음 패턴과 일치하는 명령어는 **저장되지 않습니다**:

- `password`, `passwd`, `secret`, `token`을 포함하는 명령어
- `api_key` 또는 `apikey`가 포함된 명령어
- `-p` 플래그 (비밀번호)가 있는 MySQL 명령어
- `sudo -S` (stdin 비밀번호)
- 비밀번호와 함께 `sshpass` 또는 `expect`를 사용하는 명령어
- 민감한 값이 있는 환경 변수 내보내기

### 데이터 저장

- 브라우저의 `localStorage`에 저장됨
- 클라우드 서비스에 **동기화되지 않음**
- 백업에 **포함되지 않음**
- 브라우저 데이터를 지우면 삭제됨

### 기록 지우기

명령어 기록을 지우려면:

1. **설정** → **터미널** 열기
2. **명령어 기록 지우기** 클릭

또는 명령어 리콜 팝업에서 서버별로 지울 수 있습니다.

## 제한

| 제한 | 값 |
|-------|-------|
| 서버당 최대 명령어 | 50 |
| 최소 명령어 길이 | 2자 |

## FAQ

### 왜 일부 명령어가 저장되지 않나요?

민감한 패턴 (비밀번호, 토큰 등)을 포함하는 명령어는 보안을 위해 자동으로 필터링됩니다.

### 명령어 기록을 내보낼 수 있나요?

아니요, 명령어 기록은 의도적으로 로컬에만 있으며 개인 정보 보호를 위해 내보낼 수 없습니다.

### 명령어 기록이 장치 간에 동기화되나요?

아니요, 명령어 기록은 로컬에 저장되며 동기화되지 않습니다.

### 명령어 기록을 비활성화하려면 어떻게 하나요?

설정 → 터미널 → "명령어 리콜 활성화" 비활성화로 이동합니다. 기존 기록은 수동으로 지울 때까지 유지됩니다.
