# アプリロック

アプリロックで Marix アプリケーションを保護します。有効にすると、非アクティブ期間後にアプリが自動的にロックされ、サーバーや認証情報への不正アクセスを防ぎます。

## アプリロックインターフェース

![App Lock Interface](/applock.png)

## アプリロックを有効にする

1. **設定**（サイドバーの歯車アイコン）を開く
2. **セキュリティ**セクションを見つける
3. **Enable App Lock** をトグル

## ロック方法

アプリのロック方法を選択:

| 方法 | 説明 | セキュリティレベル |
|--------|-------------|----------------|
| **ブラー** | 画面コンテンツをぼかす | 低 - 視覚的プライバシーのみ |
| **PIN** | 4-6桁の PIN でロック解除 | 中 |
| **パスワード** | パスワードでロック解除 | 高 |

### ブラーモード

- 画面コンテンツがぼやける
- どこかをクリックしてロック解除
- オフィス環境での素早いプライバシーに最適

### PIN モード

- 4-6桁の数字 PIN を設定
- PIN を入力してロック解除
- セキュリティと利便性の良いバランス

### パスワードモード

- カスタムパスワードを設定
- パスワードを入力してロック解除
- 最高のセキュリティレベル

## PIN またはパスワードの設定

PIN またはパスワードモードに切り替える際:

1. ロック方法を選択
2. 認証情報を設定するダイアログが表示される
3. PIN/パスワードを入力
4. 再度入力して確認
5. **Save** をクリック

> **注意:** PIN/パスワードを忘れた場合、アプリを再起動する必要があります。サーバーデータは安全なままです。

## ロックタイムアウト

ロックするまでの待機時間を設定:

| タイムアウト | ユースケース |
|---------|----------|
| 1分 | 最大セキュリティ |
| 2分 | 高セキュリティ |
| 5分 | デフォルト、バランス |
| 10分 | 中程度のセキュリティ |
| 15分 | カジュアル使用 |
| 30分 | 低セキュリティ |
| 60分 | 最小限の保護 |

タイマーはマウス移動、キーボード入力、またはクリックでリセットされます。

## ロック解除

### ブラーモード
- 画面のどこかをクリック
- マウスを動かす

### PIN/パスワードモード
1. PIN またはパスワードを入力
2. **Enter** を押すか **Unlock** をクリック
3. アプリが即座にロック解除

## 認証情報の変更

PIN またはパスワードを変更するには:

1. **設定** → **セキュリティ** に移動
2. **Change PIN** または **Change Password** をクリック
3. 新しい認証情報を入力
4. 確認して保存

## 認証情報のクリア

PIN/パスワードを削除してブラーに戻すには:

1. **設定** → **セキュリティ** に移動
2. **Clear Credential** をクリック
3. ロック方法がブラーに戻る

## 仕組み

1. **アクティビティ追跡**: Marix はマウス、キーボード、クリックイベントを監視
2. **非アクティビティタイマー**: 設定されたタイムアウト期間アクティビティがないと、アプリがロック
3. **即時ロック**: 手動でもロック可能（実装されている場合）
4. **セキュアストレージ**: PIN/パスワードはシステムキーチェーンを使用して安全に保存

## セキュリティの考慮事項

### アプリロックが保護するもの

- ✅ サーバーリストへの視覚的アクセス
- ✅ 保存された認証情報の表示
- ✅ アクティブなターミナルセッションへのアクセス
- ✅ SFTP ファイルマネージャーの閲覧

### アプリロックが保護しないもの

- ❌ 既に確立された SSH 接続（アクティブなまま）
- ❌ ディスク上のデータ（それにはシステム暗号化を使用）
- ❌ ネットワークトラフィック（それには SSH/TLS を使用）

## ベストプラクティス

1. 機密性の高い環境では**パスワードモードを使用**
2. 共有ワークスペースでは**短いタイムアウトを設定**
3. **ユニークな認証情報を使用** - パスワードを再利用しない
4. コンピューターを離れる前に**ロック**
5. 最大限のセキュリティのために**OS ロックと併用**

## トラブルシューティング

### PIN/パスワードを忘れた

- アプリケーションを再起動
- 再起動時にアプリロックがリセット
- サーバーデータは保持されます

### アプリがすぐにロックされる

- 設定でタイムアウトを増やす
- アクティビティ検出を妨げる可能性のあるアクティブなセッションがあるか確認

### アプリがロックされない

- アプリロックが有効になっているか確認
- タイムアウト設定を確認
- アプリウィンドウにフォーカスがあるか確認
