# SSH Key マネージャー

サーバーへのパスワードなし認証のために SSH Key を管理します。

## SSH Key マネージャーインターフェース

![SSH Key Manager Interface](/sshkey.png)

## SSH Key マネージャーを開く

サイドバーメニューの **「SSH Key」** をクリック。

## 新しい SSH Key を生成

### ステップ 1: ジェネレーターを開く
**「Generate Key」** ボタンをクリック

### ステップ 2: 詳細を入力

| フィールド | 説明 | 必須 |
|-------|-------------|----------|
| キー名 | このキーを識別する名前（例: 「work-laptop」） | はい |
| キータイプ | ed25519（推奨）、RSA、または ECDSA | はい |
| パスフレーズ | キーを暗号化するパスワード（オプションだが推奨） | いいえ |
| コメント | 追加のメモ（例: メールアドレス） | いいえ |

### ステップ 3: 生成
**「Generate」** をクリック

### ステップ 4: 完了
キーがリストに表示されます:
- 名前
- タイプバッジ（ED25519、RSA、ECDSA）
- フィンガープリント
- 作成日

## キータイプの比較

| タイプ | セキュリティ | 互換性 | 推奨 |
|------|----------|---------------|----------------|
| **ED25519** | 優れている | 最新のサーバー | ✅ 推奨 |
| **RSA (4096)** | 非常に良い | 汎用 | 古いシステムに良い |
| **ECDSA** | 良い | ほとんどのサーバー | ED25519 の代替 |

## 既存のキーをインポート

### ステップ 1: インポーターを開く
**「Import Key」** ボタンをクリック

### ステップ 2: キーデータを提供

| フィールド | 説明 | 必須 |
|-------|-------------|----------|
| キー名 | このキーの名前 | はい |
| 秘密鍵 | キーの内容を貼り付けるか「Select File」をクリック | はい |
| コメント | 追加のメモ | いいえ |

### ステップ 3: インポート
**「Import」** をクリック

## 公開鍵を表示

1. リストのキーをクリック
2. 詳細パネルが右側に表示されます
3. **「Show Public Key」** をクリック
4. 公開鍵をコピーしてサーバーの `~/.ssh/authorized_keys` に追加

## キーをエクスポート

1. リストでキーを見つける
2. **Export** ボタンをクリック（または右クリック → Export）
3. 選択:
   - **Export Public Key Only** - より安全、共有用
   - **Export Both Keys** - 秘密鍵 + 公開鍵（安全に保管！）
4. 保存場所を選択
5. キーがファイルとして保存されます

## キーを削除

1. リストでキーを見つける
2. **Delete** ボタン（ゴミ箱アイコン）をクリック
3. 削除を確認

> ⚠️ **警告:** 削除されたキーは復元できません。必要な場合はバックアップがあることを確認してください。

## サーバー接続にキーを使用

1. サーバーを追加/編集する際
2. 認証を **「SSH Key」** に設定
3. **「SSH Key from Keychain」** ドロップダウンで
4. インポートしたキーを選択
5. キーにパスフレーズがある場合は、パスフレーズフィールドに入力

## サーバーに公開鍵を追加

パスワードなしログインを有効にするには、サーバーに公開鍵を追加:

### 方法 1: 手動
```bash
# ローカルマシンで公開鍵をコピー
# 次にサーバーで:
echo "your-public-key-here" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
```

### 方法 2: ssh-copy-id を使用（利用可能な場合）
```bash
ssh-copy-id -i ~/.ssh/your_key.pub user@server
```

## ベストプラクティス

1. 可能な場合は新しいキーに **ED25519 を使用**
2. 追加のセキュリティのために**パスフレーズを追加**
3. 異なる目的（仕事、個人）に**異なるキーを使用**
4. キーを安全に**バックアップ**
5. **秘密鍵を決して共有しない** - 公開鍵のみを共有
6. セキュリティのために**定期的にキーをローテーション**
