# 既知のホスト

既知のホストは、サーバーの ID が変更された場合（潜在的なセキュリティ問題）を検出するために、サーバーのフィンガープリントを保存します。

## 既知のホストインターフェース

![Known Hosts Interface](/knowhosts.png)

## 既知のホストとは？

SSH サーバーに初めて接続すると、サーバーはそのフィンガープリントを提示します。Marix はこれを保存して:
- 将来の接続でサーバーの ID を確認
- 中間者攻撃を検出
- サーバーキーが予期せず変更された場合に警告

## 既知のホストを開く

サイドバーの **「Known Hosts」** をクリック。

## 既知のホストを表示

リストには以下が表示されます:

| 列 | 説明 |
|--------|-------------|
| ホスト | サーバーのホスト名/IP |
| ポート | SSH ポート |
| キータイプ | SSH キーアルゴリズム（ED25519、RSA、ECDSA） |
| フィンガープリント | 一意のサーバー識別子 |
| 追加日 | ホストが信頼された日時 |

## 既知のホストを検索

1. 上部の検索ボックスを使用
2. ホスト名、IP、またはフィンガープリントで検索

## キータイプでフィルター

1. ドロップダウンフィルターを使用
2. 選択: All、ED25519、RSA、または ECDSA

## サーバーからホストをインポート

接続せずにサーバーのフィンガープリントを手動で追加:

1. **「Import from Host」** ボタンをクリック
2. 入力:
   - ホスト名または IP
   - ポート（デフォルト 22）
3. **「Import」** をクリック
4. サーバーのフィンガープリントが取得され保存されます

## 既知のホストを削除

1. リストでホストを見つける
2. **Delete** ボタン（ゴミ箱アイコン）をクリック
3. 削除を確認

### 削除すべき場合

- サーバーが再インストールされ、新しいキーがある
- サーバーの IP/ホスト名が変更された
- このサーバーにもう接続しない

## ホストキーの確認

新しいサーバーに接続する際:
1. Marix がサーバーのフィンガープリントを取得
2. 確認して信頼するよう求められる
3. 承認後、既知のホストに保存される
4. 将来の接続は自動的に確認される

## セキュリティ警告

### 「ホストキーが変更されました」
この警告は、サーバーのフィンガープリントが保存されているものと異なる場合に表示されます。

**考えられる原因:**
- サーバーが再インストールされた
- サーバーの SSH キーが再生成された
- ⚠️ **中間者攻撃**（稀だが可能性あり）

**対処法:**
1. サーバー管理者にキーが正当に変更されたか確認
2. 確認された場合、既知のホストから古いエントリを削除
3. 再接続して新しいフィンガープリントを承認
4. 疑わしい場合は、接続しない

## ベストプラクティス

1. 新しいサーバーに接続する際は**フィンガープリントを確認**
2. 変更されたホストキーに関する警告を**無視しない**
3. 既知のホストリストを**定期的に確認**
4. もう使用しないサーバーの**古いエントリを削除**
