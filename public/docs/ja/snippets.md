# コマンドスニペット

スニペットは、SSH ターミナルで頻繁に使用するコマンドをすばやく実行するのに役立つ再利用可能なコマンドテンプレートです。

## コマンドスニペットインターフェース

![Command Snippets Interface](/snippets.png)

---

## 概要

スニペット機能は**コマンドテンプレート**とオプションの**キーボードショートカット**を組み合わせます:

- **よく使うコマンドを保存**してすばやくアクセス
- **ホットキーを割り当て**（Ctrl+Shift+Key または Cmd+Shift+Key）して即座に実行
- **カテゴリ別に整理**（System、Docker、Git、Network など）
- **スコープベースの表示** - グローバル、ホストごと、またはグループごと

---

## スニペットへのアクセス

### スニペットパネル

SSH ターミナルに接続すると、右側に**スニペットパネル**が表示されます:

- **検索** - 名前、コマンド、またはタグでスニペットを見つける
- **カテゴリでフィルター** - カテゴリアイコンをクリックしてフィルター
- **クリックして挿入** - 任意のスニペットをクリックしてコマンドを挿入
- **折りたたみ/展開** - パネルの表示を切り替え

### スニペットマネージャー

サイドバーメニューからアクセスして:

- スコープ別に整理されたすべてのスニペットを表示
- スニペットの追加、編集、または削除
- ホットキーの割り当てを管理

---

## スニペットの作成

1. サイドバーから**スニペットマネージャー**を開く
2. **Add Snippet** ボタンをクリック
3. フォームに入力:

| フィールド | 説明 |
|-------|-------------|
| 名前 | 短い説明的なタイトル |
| コマンド | シェルコマンド |
| カテゴリ | 定義済みから選択または「Custom」 |
| スコープ | Global、Host、または Group |
| ホットキー | オプションの1文字 |
| 説明 | コマンドの説明 |
| タグ | 検索用のキーワード |

### スニペットの例

| 名前 | コマンド | カテゴリ | ホットキー |
|------|---------|----------|--------|
| Disk Usage | `df -h` | System | D |
| List All Docker | `docker ps -a` | Docker | P |
| Git Status | `git status` | Git | G |
| Check Ports | `netstat -tulpn` | Network | N |
| Tail Logs | `tail -f /var/log/syslog` | System | L |

---

## ホットキーの使用

### キーボードショートカット

| プラットフォーム | ショートカット形式 |
|----------|-----------------|
| **Windows/Linux** | `Ctrl + Shift + [Key]` |
| **macOS** | `Cmd + Shift + [Key]` |

### 予約されたキー

一部のキーは予約されており使用できません:

| キー | 予約用途 |
|-----|--------------|
| A | Add New Host |
| C | Copy |
| L | Toggle LAN Transfer |
| O | Switch Terminal/SFTP |
| T | Local Terminal |
| V | Paste |

---

## カテゴリ

| アイコン | カテゴリ | 用途 |
|------|----------|---------|
| 🖥️ | System | OS コマンド、サービス、ログ |
| 🐳 | Docker | コンテナ管理 |
| 📦 | Git | バージョン管理 |
| 🌐 | Network | ポート、接続、DNS |
| 📁 | Files | ファイル操作 |
| 🗄️ | Database | データベースコマンド |
| ✨ | Custom | その他 |

---

## スコープレベル

### グローバルスコープ
**すべての** SSH 接続で表示。汎用コマンドに最適。

### ホストスコープ
**特定のサーバー**でのみ表示。サーバー固有のコマンドに最適。

### グループスコープ
**特定のグループ**内のすべてのサーバーで表示。環境固有のコマンドに最適。

---

## ヒントとベストプラクティス

1. **変数を使用** - 可変部分にはプレースホルダーを残す: `tail -f [LOG_PATH]`
2. **コマンドをチェーン** - 複数のコマンドを組み合わせる: `cd /var/www && git pull && systemctl restart app`
3. **タグで整理** - `prod`、`dev`、`urgent` などのタグを追加してフィルタリングを容易に
4. **スニペットをバックアップ** - 暗号化された .marix バックアップに含まれる

---

## データストレージ

- ブラウザの localStorage にローカル保存
- 暗号化されたバックアップ（.marix ファイル）に含まれる
- Google Drive と同期（有効な場合）
- 明示的なバックアップアクションなしにクラウドストレージなし

---

## トラブルシューティング

| 問題 | 解決策 |
|-------|----------|
| ホットキーが動作しない | 競合を確認、ターミナルにフォーカスがあるか確認 |
| スニペットが表示されない | スコープが現在の接続に一致しているか確認 |
| コマンドが実行されない | ターミナル状態、権限の問題を確認 |
