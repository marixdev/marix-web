# 二要素認証 (2FA/TOTP)

Google Authenticator のような内蔵 TOTP コードジェネレーター。2FA シークレットを保存し、スマートフォンなしでコードを取得できます。

## 2FA インターフェース

![2FA Interface](/2fa.png)

## 2FA を開く

サイドバーの **「2FA」** をクリック。

## 新しい 2FA アカウントを追加

### ステップ 1: ダイアログを開く
**「Add Account」** ボタンをクリック

### ステップ 2: 詳細を入力

| フィールド | 説明 | 必須 |
|-------|-------------|----------|
| アカウント名 | このアカウントのラベル（例: 「GitHub」、「AWS」） | いいえ（自動命名） |
| シークレットキー | TOTP シークレット（QR コード設定ページから取得） | はい |

### ステップ 3: 保存
**「Add」** をクリック

## シークレットキーの取得方法

Web サイトで 2FA を有効にする際:

1. **「QR コードをスキャンできませんか？」** または **「手動入力」** を探す
2. シークレットキーをコピー（通常は大文字と数字）
3. Marix に貼り付け

シークレットキーの形式例:
```
JBSWY3DPEHPK3PXP
```

## 2FA コードの使用

1. リストでアカウントを見つける
2. 横に6桁のコードが表示される
3. カウントダウンタイマーでコード更新までの秒数を表示
4. **Copy** ボタンをクリックしてコードをクリップボードにコピー

### タイマー
- コードは **30秒** ごとに更新
- 円形の進捗インジケーターで残り時間を表示
- 現在のコードが期限切れに近い場合は新しいコードを待つ

## アカウント名の編集

1. アカウントの横にある **Edit** ボタンをクリック
2. 新しい名前を入力
3. Enter を押すか Save をクリック

## 2FA アカウントの削除

1. **Delete** ボタン（ゴミ箱アイコン）をクリック
2. 削除を確認

> ⚠️ **警告:** 削除するとシークレットが削除されます。削除前に関連アカウントへのバックアップアクセスがあることを確認してください。

## 一般的なサービス

TOTP をサポートする人気のサービス:

| サービス | 2FA 設定の場所 |
|---------|----------------------|
| GitHub | Settings → Password and authentication |
| AWS | IAM → Security credentials |
| Google | Google アカウント → セキュリティ |
| Microsoft | セキュリティ設定 → 2段階認証 |
| Cloudflare | Profile → Authentication |
| DigitalOcean | Account → Security |
| Linode | My Profile → Password & Authentication |

## ベストプラクティス

1. **シークレットをバックアップ** - シークレットキーを安全に保存
2. **リカバリーコードを保持** - サービスが提供するバックアップコードを保存
3. **わかりやすい名前を使用** - アカウントをすばやく識別
4. **追加後すぐにコードをテスト** - すぐに動作することを確認
5. **時刻同期** - コンピューターの時計が正確であることを確認

## トラブルシューティング

### コードが動作しない

1. **時刻同期を確認** - コンピューターの時計が正確である必要があります
2. **シークレットキーを確認** - 間違ってコピーした場合は再入力
3. **次のコードを待つ** - 現在のコードが期限切れに近い可能性

### アクセスを失った

Marix へのアクセスを失った場合:
1. サービスが提供する**リカバリーコード**を使用
2. アカウント回復のためにサービスサポートに連絡
