# RDP リモートデスクトップ

Remote Desktop Protocol（RDP）を使用して Windows サーバーやコンピューターに接続します。

## RDP サーバーを追加

1. **「Add New Host」** をクリック
2. **プロトコル**: RDP を選択
3. 以下を入力:
   - **Host/IP**: Windows サーバーアドレス
   - **ポート**: 3389（デフォルト）
   - **ユーザー名**: Windows ユーザー名
   - **パスワード**: Windows パスワード
   - **ドメイン**: （オプション）Windows ドメイン名
4. **Create** をクリック

## .rdp ファイルからインポート

既に RDP 設定ファイルをお持ちですか？

1. サーバー追加ダイアログで **「Import .rdp file」** をクリック
2. `.rdp` ファイルを選択
3. フィールドがファイルから自動入力される
4. 必要に応じて設定を調整
5. **Create** をクリック

## RDP に接続

1. ホストリストの RDP サーバーをダブルクリック
2. リモートデスクトップウィンドウがアプリケーション内で開く
3. Windows デスクトップを通常通り操作可能

## RDP コントロール

| 入力 | 動作 |
|-------|----------|
| **マウス** | クリック、ドラッグ、スクロールが通常通り動作 |
| **キーボード** | すべてのキーがリモートに転送 |
| **クリップボード** | ローカルとリモート間でコピー/ペースト |

## 切断

- セッションタブの × をクリック
- またはアプリケーションを閉じる
- セッション状態はリモートサーバーで保持される

## Linux の要件

Linux での RDP サポートには FreeRDP が必要です。Marix は FreeRDP がインストールされているかどうかを**自動検出**します。

### 自動インストール

FreeRDP が見つからない場合:
1. 接続しようとすると通知が表示される
2. **「Install」** ボタンをクリック
3. Marix が FreeRDP を自動的にインストール
4. インストール完了後に再接続

### 手動インストール

手動でインストールする場合:

**Ubuntu/Debian**
```bash
sudo apt install freerdp3-x11 xdotool
```

**Fedora**
```bash
sudo dnf install freerdp xdotool
```

**Arch Linux**
```bash
sudo pacman -S freerdp xdotool
```

## ディスプレイ設定

RDP セッションはウィンドウサイズに適応します。最良の体験のために:
- ウィンドウを最大化してフルデスクトップ体験
- ウィンドウをリサイズしてリモート解像度を調整
- ウィンドウコントロールでフルスクリーンモード利用可能

## パフォーマンスのヒント

- 遅い接続では**色深度を下げる**
- Windows 側で**視覚効果を無効化**
- 最高のパフォーマンスには**有線接続**を使用
- リモートマシンで不要なアプリケーションを閉じる

## トラブルシューティング

### 接続拒否
- Windows でリモートデスクトップが有効になっているか確認
- Windows ファイアウォールが RDP を許可しているか確認
- 正しいポート（デフォルト 3389）を確認

### 黒い画面
- 少し待つ - 初期接続には時間がかかる場合がある
- 再接続を試す
- リモートマシンがスリープモードでないか確認

### パフォーマンスが遅い
- 画面解像度を下げる
- 色深度を下げる
- ネットワーク速度を確認
- 帯域幅を多く使うアプリケーションを閉じる

### 認証失敗
- ユーザー名の形式を確認:
  - ローカル: `username`
  - ドメイン: `DOMAIN\username` または `username@domain.com`
- パスワードが正しいか確認
- アカウントにリモートデスクトップアクセス権があるか確認
