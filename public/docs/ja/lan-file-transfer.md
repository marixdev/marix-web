# LAN ファイル転送

サーバーを必要とせずに、同じローカルネットワーク上のデバイス間でファイルを転送します。

## LAN ファイル転送インターフェース

![LAN File Transfer Interface](/sendfile.png)

## 要件

> ⚠️ **重要:** 送信者と受信者の両方で **LAN Discovery を有効** にする必要があります。
> 
> ヘッダーバーの 🌐 ボタンをクリックするか、`Ctrl+Shift+L` で切り替えます。

- 両方のデバイスが同じネットワーク（WiFi/LAN）上にある
- 両方のデバイスで LAN Discovery が有効
- 両方のデバイスで Marix が起動中

## LAN ファイル転送を開く

サイドバーの **「Send Files」** をクリック。

## ファイルを送信

### ステップ 1: LAN Discovery を有効化
ヘッダーバーの **🌐**（地球）アイコンをクリック。

### ステップ 2: ファイルを選択
1. Send Files → **Send** タブに移動
2. **「Select Files」** または **「Select Folder」** をクリック
3. 選択したアイテムがリストに表示される
4. × をクリックしてアイテムを削除

### ステップ 3: ペアリングコードを取得
表示されている6桁の**ペアリングコード**をメモ。

### ステップ 4: コードを共有
受信者にペアリングコードを伝える（口頭またはメッセージで）。

### ステップ 5: 送信開始
1. **「Start Sending」** をクリック
2. ステータス: 「Waiting for receiver...」
3. 受信者が接続すると転送開始

## ファイルを受信

### ステップ 1: LAN Discovery を有効化
ヘッダーバーの **🌐**（地球）アイコンをクリック。

### ステップ 2: 接続
1. Send Files → **Receive** タブに移動
2. 送信者からの6桁のペアリングコードを入力
3. **「Connect」** をクリック

### ステップ 3: 受信
- デバイスが自動的に接続
- 転送が即座に開始
- ファイルはダウンロードフォルダに保存

## 転送の進捗

転送中は以下が表示されます:
- 完了パーセンテージ付きの進捗バー
- 速度インジケーター（例: 「5.2 MB/s」）
- 現在転送中のファイル

## 転送のキャンセル

**「Cancel」** ボタンをクリックしていつでも転送を停止。

## トラブルシューティング

### 送信者/受信者が見つからない

1. 両方のデバイスで **LAN Discovery が ON** になっているか確認（🌐 アイコンがアクティブ）
2. 両方のデバイスが**同じローカルネットワーク**上にある必要がある
3. ファイアウォールが Marix をブロックしていないか確認
4. 接続を更新してみる

### 転送失敗

- 大きなファイルには時間がかかる - 待つ
- 安定したネットワーク接続を確保
- 新しいペアリングコードで再送信してみる
- 受信者の利用可能なディスク容量を確認

### 転送速度が遅い

- より高速な転送には有線イーサネットを使用
- ネットワークの混雑を減らす
- 帯域幅を多く使うアプリケーションを閉じる
- ルーター/ネットワークのパフォーマンスを確認

## セキュリティ

- 転送は**エンドツーエンド暗号化**を使用
- 6桁のペアリングコードで意図した受信者のみがファイルを受信
- データは外部サーバーを通過しない
- ファイルはデバイス間で直接転送
