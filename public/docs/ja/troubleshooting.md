# トラブルシューティング

Marix の一般的な問題と解決策。

## 接続の問題

### 「Connection refused」

**原因:**
- サーバーが起動していない
- 間違った IP/ホスト名
- 間違ったポート
- ファイアウォールが接続をブロック

**解決策:**
1. ホスト/IP が正しいか確認
2. ポートが正しく開いているか確認
3. サーバーが起動しているか確認
4. ファイアウォールが接続を許可しているか確認
5. サーバーに ping してみる

### 「Connection timeout」

**原因:**
- サーバーに到達できない
- ネットワークの問題
- ファイアウォールがブロック

**解決策:**
1. インターネット接続を確認
2. サーバーがオンラインか確認
3. 別のネットワークから試す
4. VPN が必要か確認

### 「Authentication failed」

**原因:**
- 間違ったユーザー名
- 間違ったパスワード
- 間違った SSH Key
- キーパスフレーズが正しくない

**解決策:**
1. ユーザー名が正しいか確認
2. パスワードを確認（大文字小文字を区別）
3. 正しい SSH Key が選択されているか確認
4. 正しいキーパスフレーズを入力
5. ユーザーがサーバーで SSH アクセスを持っているか確認

### 「Host key verification failed」

**原因:**
- サーバーが再インストールされた
- サーバーの SSH キーが変更された
- 潜在的なセキュリティ問題

**解決策:**
1. サーバー管理者にキーが変更されたか確認
2. Known Hosts → 古いエントリを削除
3. 再接続して新しいフィンガープリントを承認
4. 疑わしい場合は、接続前に調査

### 「Permission denied (publickey)」

**原因:**
- SSH Key が受け入れられない
- キーが authorized_keys にない
- 間違ったキーが選択されている

**解決策:**
1. 公開鍵がサーバーの `~/.ssh/authorized_keys` にあるか確認
2. キーのパーミッションを確認: `chmod 600 ~/.ssh/authorized_keys`
3. Marix で正しいキーが選択されているか確認
4. 利用可能ならパスワード認証を試す

## SFTP の問題

### アップロード時に「Permission denied」

**原因:**
- リモートで書き込み権限がない
- 間違ったディレクトリ
- ディスクがいっぱい

**解決策:**
1. リモートフォルダの書き込み権限を確認
2. まずホームディレクトリにアップロードしてみる
3. サーバーのディスク容量を確認
4. 必要に応じて `sudo` を使用（ターミナル経由）

### ファイル転送が遅い

**原因:**
- ネットワーク速度
- 大きなファイルサイズ
- サーバー負荷

**解決策:**
1. ネットワーク速度を確認
2. 大きなファイルには時間がかかる - 待つ
3. オフピーク時間に試す
4. 転送前にファイルを圧縮

### 「No such file or directory」

**原因:**
- パスが存在しない
- シンボリックリンクが壊れている
- ディレクトリを一覧表示する権限

**解決策:**
1. パスが存在するか確認
2. 手動でその場所に移動
3. 親ディレクトリのパーミッションを確認

## ターミナルの問題

### ターミナルに文字化けが表示される

**原因:**
- エンコーディングの不一致
- ターミナルタイプの非互換性

**解決策:**
1. 別のターミナルテーマを試す
2. サーバーのロケール設定を確認
3. サーバーに再接続

### コピー/ペーストが動作しない

**解決策:**
1. `Ctrl+Shift+C` と `Ctrl+Shift+V` を使用
2. **テキストをコピー**: 
   - マウスでテキストを選択 → コピー
   - または `Ctrl+C` を使用
3. **テキストをペースト**: 
   - 右クリック → ペースト
   - または `Ctrl+V` を使用
4. テキストが実際に選択されているか確認

### ターミナルが応答しない

**解決策:**
1. 少し待つ - コマンドが処理中かもしれない
2. `Ctrl+C` を押して実行中のコマンドをキャンセル
3. 再接続ボタンをクリック
4. タブを閉じて再度開く

## RDP の問題

### 接続後に黒い画面

**原因:**
- 初期接続の遅延
- リモートマシンがスリープ中
- グラフィックの問題

**解決策:**
1. 接続を待つ
2. 再接続を試す
3. まずリモートマシンを起こす
4. リモートマシンがロックされていないか確認

### RDP パフォーマンスが遅い

**解決策:**
1. 色深度設定を下げる
2. Windows で視覚効果を無効化
3. 有線接続を使用
4. 帯域幅を多く使うアプリケーションを閉じる
5. リモート解像度を下げる

## アプリケーションの問題

### Marix が起動しない

**解決策:**
1. コンピューターを再起動
2. Marix を再インストール
3. 競合するソフトウェアを確認
4. 管理者として実行（Windows）

### 設定が保存されない

**原因:**
- 書き込み権限がない
- 設定ファイルが破損

**解決策:**
1. 管理者として Marix を実行
2. 設定をリセット（Settings → Reset）
3. 設定フォルダを削除して再起動

### CPU/メモリ使用量が高い

**解決策:**
1. 使用していない接続タブを閉じる
2. 開いている SFTP パネルの数を減らす
3. Marix を再起動
4. 最新バージョンに更新

## バックアップの問題

### 復元時に「Wrong password」

**解決策:**
1. 正確なパスワードを使用していることを確認
2. パスワードは大文字小文字を区別
3. 先頭/末尾のスペースを確認
4. 別のプロバイダーからのバックアップを試す

### バックアップのアップロードが失敗

**解決策:**
1. インターネット接続を確認
2. OAuth 接続が有効か確認
3. バックアッププロバイダーに再接続
4. ストレージクォータを超えていないか確認

## ヘルプを得る

問題がここにリストされていない場合:

1. **アップデートを確認** - 最新バージョンで問題が修正されている可能性
2. GitHub で**問題を検索**
3. [GitHub Issues](https://github.com/marixdev/marix/issues) で**バグを報告**
4. Web サイト経由で**サポートに連絡**

問題を報告する際は以下を含めてください:
- Marix バージョン
- オペレーティングシステム
- 再現手順
- エラーメッセージ（ある場合）
- スクリーンショット（該当する場合）
