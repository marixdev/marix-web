# Cloudflare DNS マネージャー

Marix から直接 Cloudflare DNS レコードを管理します。

## Cloudflare DNS マネージャーインターフェース

![Cloudflare DNS Manager Interface](/cf.png)

## セットアップ

### ステップ 1: API トークンを取得

1. [Cloudflare Dashboard](https://dash.cloudflare.com) にアクセス
2. Profile → API Tokens に移動
3. 「Create Token」をクリック
4. 「Edit zone DNS」テンプレートを使用するか、以下でカスタム作成:
   - Zone.DNS: Edit
   - Zone.Zone: Read
5. トークンをコピー

### ステップ 2: Marix で設定

1. サイドバーの **設定** に移動
2. **「Cloudflare API Token」** セクションを見つける
3. **「Add Token」** をクリック
4. トークンを貼り付け
5. **「Save」** をクリック

## Cloudflare DNS の使用

1. サイドバーの **「Cloudflare」** をクリック
2. ドメインがドロップダウンに読み込まれる
3. ドメインを選択
4. そのドメインの DNS レコードが表示される

## DNS レコードを表示

テーブルには以下が表示されます:

| 列 | 説明 |
|--------|-------------|
| タイプ | レコードタイプ（A、AAAA、CNAME、MX、TXT など） |
| 名前 | レコード名/サブドメイン |
| コンテンツ | レコード値（IP、ホスト名、テキスト） |
| TTL | Time-to-live（Auto または秒） |
| プロキシ | Cloudflare 経由でプロキシまたは DNS のみ |

## DNS レコードを追加

### ステップ 1: ダイアログを開く
**「Add Record」** ボタンをクリック

### ステップ 2: 詳細を入力

| フィールド | 説明 |
|-------|-------------|
| タイプ | 選択: A、AAAA、CNAME、MX、TXT、SRV など |
| 名前 | サブドメイン（例: 「www」）またはルートの場合は「@」 |
| コンテンツ | 値（A の場合は IP、CNAME の場合はホスト名など） |
| TTL | Time-to-live: Auto またはカスタム秒数 |
| プロキシ | トグル: プロキシ（オレンジのクラウド）または DNS のみ（グレー） |
| コメント | オプションのメモ |

### ステップ 3: 作成
**「Create」** をクリック

## 一般的なレコードタイプ

### A Record
ドメインを IPv4 アドレスにポイント。

| フィールド | 例 |
|-------|---------|
| タイプ | A |
| 名前 | @（または www） |
| コンテンツ | 192.168.1.100 |

### AAAA Record
ドメインを IPv6 アドレスにポイント。

| フィールド | 例 |
|-------|---------|
| タイプ | AAAA |
| 名前 | @ |
| コンテンツ | 2001:db8::1 |

### CNAME Record
別のドメインへのエイリアスを作成。

| フィールド | 例 |
|-------|---------|
| タイプ | CNAME |
| 名前 | www |
| コンテンツ | example.com |

### MX Record
メールサーバーを指定。

| フィールド | 例 |
|-------|---------|
| タイプ | MX |
| 名前 | @ |
| コンテンツ | mail.example.com |
| 優先度 | 10 |

### TXT Record
テキストデータを保存（SPF、DKIM、検証）。

| フィールド | 例 |
|-------|---------|
| タイプ | TXT |
| 名前 | @ |
| コンテンツ | v=spf1 include:_spf.google.com ~all |

## DNS レコードを編集

1. テーブルでレコードを見つける
2. **Edit** ボタン（鉛筆アイコン）をクリック
3. フィールドを変更
4. **「Save」** をクリック

## DNS レコードを削除

1. レコードを見つける
2. **Delete** ボタン（ゴミ箱アイコン）をクリック
3. 削除を確認

## プロキシステータス

| アイコン | ステータス | 効果 |
|------|--------|--------|
| 🟠 オレンジのクラウド | プロキシ | トラフィックは Cloudflare CDN を経由 |
| ⚪ グレーのクラウド | DNS のみ | オリジンへの直接接続 |

### プロキシを使用する場合

**プロキシ（オレンジ）:**
- Web サーバー（HTTP/HTTPS）
- DDoS 保護が必要
- CDN キャッシュが必要

**DNS のみ（グレー）:**
- SSH、FTP、メールサーバー
- 非 HTTP サービス
- 直接 IP 接続が必要

## レコードを更新

ドメインドロップダウンの横にある **Refresh** ボタンをクリックしてレコードを再読み込み。

## ヒント

- ほとんどの場合、**TTL Auto** が推奨
- DNS ルックアップツールを使用して**変更をテスト**
- 大きな変更を行う前に**レコードをバックアップ**
- **伝播**にはグローバルで最大48時間かかる場合がある
