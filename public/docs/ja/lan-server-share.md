# LAN サーバー共有

同じローカルネットワーク上の他の Marix ユーザーとサーバー設定を共有します。

## LAN サーバー共有インターフェース

![LAN Server Share Interface](/servershare.png)

## 要件

> ⚠️ **重要:** 送信者と受信者の両方で **LAN Discovery を有効** にする必要があります。
> 
> ヘッダーバーの 🌐 ボタンをクリックするか、`Ctrl+Shift+L` で切り替えます。

- 両方のデバイスが同じネットワーク（WiFi/LAN）上にある
- 両方のデバイスで LAN Discovery が有効
- 両方のデバイスで Marix が起動中

## ユースケース

- チームメンバーとサーバーアクセスを共有
- 新しいコンピューターをすばやくセットアップ
- デバイス間で設定を転送
- 新しいチームメンバーのオンボーディング

## サーバー共有を開く

### 方法 1: 右クリックメニュー
1. ホストリストでサーバーを右クリック
2. **「Share on LAN」** を選択

### 方法 2: 複数選択
1. `Ctrl`（Mac では `⌘`）を押しながら複数のサーバーをクリック
2. 表示される **「Share」** ボタンをクリック
3. または右クリックして **「Share on LAN」** を選択

## サーバーを共有（送信者）

### ステップ 1: LAN Discovery を有効化
ヘッダーバーの **🌐**（地球）アイコンをクリック。

### ステップ 2: サーバーを選択
- 右クリック → 「Share on LAN」で単一サーバー
- または複数のサーバーを選択して Share をクリック

### ステップ 3: サーバー選択モーダル
- 選択したサーバーを確認
- **「Select All」** をクリックしてすべてのサーバーを共有
- **「Clear」** をクリックしてすべて選択解除
- タグをクリックしてそのタグを持つサーバーをすばやく選択

### ステップ 4: 「Share」ボタンをクリック

### ステップ 5: オプションを設定

| オプション | 説明 |
|--------|-------------|
| 機密データを含める ✅ | パスワードと秘密鍵を共有 |
| 機密データを含める ❌ | パスワード/キーを除去（受信者が手動で入力） |

### ステップ 6: ペアリングコードをメモ
6桁の**ペアリングコード**は5分間有効。

### ステップ 7: コードを共有
受信者にペアリングコードを伝える。

### ステップ 8: 送信
**「Share on LAN」** をクリック

ステータス: 「Sent X server(s). Waiting for receiver...」

## サーバーを受信（受信者）

### ステップ 1: LAN Discovery を有効化
ヘッダーバーの **🌐**（地球）アイコンをクリック。

### ステップ 2: 通知を待つ
誰かがサーバーを送信するとポップアップが表示されます。

または Hosts → 空の領域を右クリック → 「Receive Shared Servers」

### ステップ 3: ペアリングコードを入力
送信者からの6桁のコードを入力。

### ステップ 4: インポート
**「Decrypt & Import」** をクリック

### ステップ 5: 完了！
サーバーは以下とともにインポートされます:
- すべての元の設定
- 自動的に追加される **「LAN-Import」** タグ
- パスワード/キー（送信者が含めた場合）

ステータス: 「Successfully imported X server(s)!」

## セキュリティ

- すべての転送は**暗号化**されます
- 6桁のペアリングコードが必要
- コードは5分後に期限切れ
- データは外部サーバーを通過しない
- デバイス間で直接転送

## トラブルシューティング

### デバイスが表示されない

1. 両方のデバイスが**同じネットワーク**（WiFi/LAN）上にある
2. 両方のデバイスで **LAN Discovery が ON**
3. 「Refresh」をクリックして再スキャン
4. ファイアウォールが Marix をブロックしていないか確認

### ペアリングコードが期限切れ

- コードは5分後に期限切れ
- 送信者は「Regenerate」をクリックして新しいコードを取得可能

### 「Wrong Pairing Code」エラー

- 送信者とコードを再確認
- コードは大文字小文字を区別
- 必要に応じて新しいコードをリクエスト

### サーバーにパスワードがない

- 送信者が「Include sensitive data」を無効にした可能性
- インポート後に手動でパスワードを入力
- 送信者に機密データを含めて再共有を依頼
