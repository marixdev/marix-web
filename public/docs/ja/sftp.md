# SFTP ファイルマネージャー

SFTP（SSH File Transfer Protocol）は、暗号化された SSH 接続を介した安全なファイル転送を提供します。

## SFTP を開く

### 既存の SSH 接続から

1. SSH サーバーに接続
2. セッション上部の **SFTP** ボタンをクリック
3. または キーボードショートカット: `Ctrl+Shift+O`

### 直接 SFTP 接続

1. ホストリストの SSH サーバーを右クリック
2. コンテキストメニューから **「SFTP」** を選択

## インターフェースレイアウト

![SFTP Interface](/sftp.png)

## ナビゲーションコントロール

| ボタン | 機能 |
|--------|----------|
| ← | 履歴を戻る |
| → | 履歴を進む |
| ↑ | 親ディレクトリへ |
| 🏠 | ホームディレクトリへ |
| 🔄 | 現在のディレクトリを更新 |
| 🔍 | ファイルを検索/フィルター |
| 💾 | ドライブを選択（Windows/Linux） |

## ファイル操作

### ファイルをダウンロード（リモート → ローカル）

1. **リモート**（右）ペインでファイルに移動

**方法A: ドラッグ＆ドロップ**
- ファイルをクリックしてローカル（左）ペインにドラッグ
- 目的のフォルダにドロップ

**方法B: 右クリック**
- ファイルを右クリック
- **「Download」** を選択
- ファイルは現在のローカルフォルダにダウンロード

### ファイルをアップロード（ローカル → リモート）

1. **ローカル**（左）ペインでファイルに移動

**方法A: ドラッグ＆ドロップ**
- ファイルをクリックしてリモート（右）ペインにドラッグ
- 目的のフォルダにドロップ

**方法B: 右クリック**
- ファイルを右クリック
- **「Upload」** を選択
- ファイルは現在のリモートフォルダにアップロード

### 新規フォルダを作成

1. 目的のディレクトリに移動
2. 空白部分を右クリック
3. **「New Folder」** を選択
4. フォルダ名を入力
5. OK をクリック

### 新規ファイルを作成

1. 目的のディレクトリに移動
2. 空白部分を右クリック
3. **「New File」** を選択
4. ファイル名を入力
5. OK をクリック（空のファイルが作成されます）

### ファイルまたはフォルダを削除

1. ファイルまたはフォルダを右クリック
2. **「Delete」** を選択
3. 削除を確認

### ファイルまたはフォルダの名前を変更

1. ファイルまたはフォルダを右クリック
2. **「Rename」** を選択
3. 新しい名前を入力
4. OK をクリック

## パーミッション変更 (chmod)

1. ファイルまたはフォルダ（リモートペイン）を右クリック
2. **「Change Permissions」** を選択
3. 8進数形式でパーミッションを入力（例: `755`、`644`）
4. OK をクリック

### 一般的なパーミッション値

| 値 | 意味 | 用途 |
|-------|---------|----------|
| `755` | 所有者: フル、その他: 読み取り+実行 | フォルダ、実行可能ファイル |
| `644` | 所有者: 読み取り+書き込み、その他: 読み取り | 通常のファイル |
| `600` | 所有者のみ | プライベートファイル、SSH Key |
| `777` | 全員: フルアクセス | 非推奨 |

## リモートファイルの編集

1. リモートペインでテキストファイルを見つける
2. ダブルクリック（または右クリック → Edit）
3. ファイルが内蔵エディターで開く
4. 変更を加える
5. **Save** をクリックまたは `Ctrl+S` を押す
6. ファイルはサーバーに保存されます

### 対応ファイルタイプ

**コードファイル:**
`.js`, `.ts`, `.py`, `.php`, `.java`, `.c`, `.cpp`, `.go`, `.rs`, `.rb`

**設定ファイル:**
`.json`, `.yml`, `.yaml`, `.toml`, `.ini`, `.conf`, `.env`

**Web ファイル:**
`.html`, `.css`, `.scss`, `.vue`, `.svelte`

**スクリプト:**
`.sh`, `.bash`, `.ps1`, `.bat`

**その他:**
`.txt`, `.md`, `.log`, `Dockerfile`, `Makefile`

## ファイルの圧縮

リモートサーバー上でファイルやフォルダからアーカイブを作成:

1. ファイルまたはフォルダ（リモートペイン）を右クリック
2. **「Compress」** にカーソルを合わせる
3. 形式を選択:
   - **ZIP** - どこでも使えるユニバーサル形式
   - **TAR.GZ** - Linux/Unix に最適
   - **TAR** - 非圧縮アーカイブ

アーカイブは同じディレクトリに作成されます。

## アーカイブの展開

リモートサーバー上で圧縮ファイルを展開:

1. アーカイブファイル（リモートペイン）を右クリック
2. **「Extract Here」** を選択
3. ファイルは現在のディレクトリに展開されます

### 対応アーカイブ形式

| 形式 | 拡張子 |
|--------|------------|
| ZIP | `.zip` |
| TAR | `.tar`, `.tar.gz`, `.tgz`, `.tar.bz2`, `.tar.xz` |
| GZIP | `.gz` |
| BZIP2 | `.bz2` |
| XZ | `.xz` |
| 7-Zip | `.7z` |
| RAR | `.rar` |

> **注意:** 展開にはサーバーに適切なツール（unzip、tar、7z、unrar）がインストールされている必要があります。

## ファイルプロパティ

ファイルとフォルダの詳細情報を表示:

1. ファイルまたはフォルダを右クリック
2. **「Properties」** を選択
3. 詳細を表示:

| プロパティ | 説明 |
|----------|-------------|
| 名前 | ファイルまたはフォルダ名 |
| パス | フルパスの場所 |
| サイズ | ファイルサイズ（bytes/KB/MB/GB） |
| タイプ | ファイルまたはディレクトリ |
| パーミッション | 読み取り/書き込み/実行（例: 755） |
| 所有者 | ユーザー所有者（リモートのみ） |
| グループ | グループ所有者（リモートのみ） |
| 更新日時 | 最終更新日 |
| 作成日時 | 作成日（利用可能な場合） |
| アクセス日時 | 最終アクセス日 |

## 転送キュー

複数のファイルを転送する場合:
- 進捗バーで全体の完了状況を表示
- 個別のファイル進捗を表示
- ✕ をクリックして転送をキャンセル
- 失敗した転送は再試行可能

## キーボードショートカット

| ショートカット | アクション |
|----------|--------|
| `Ctrl+Shift+O` | ターミナル/SFTP 切り替え |
| `F2` | 選択したファイルの名前を変更 |
| `Delete` | 選択したファイルを削除 |
| `Ctrl+C` | パスをコピー |
| `Ctrl+R` | ディレクトリを更新 |

## ヒント

- **フォルダ全体をドラッグ**して再帰的に転送
- フォルダを**ダブルクリック**して入る
- **検索/フィルター**を使用してファイルをすばやく見つける
- **上書き確認**で誤ったデータ損失を防止
