# 备份与恢复

使用加密备份保护您的数据。Marix 支持 6 个备份提供商，全部使用 Argon2id 加密。

> 💡 **提示：** 一旦您连接了云账户进行备份，在同一设备上恢复时无需重新连接。您的认证信息保存在本地。

## 备份与恢复界面

### 备份
![Backup Interface](/backup.png)

### 恢复
![Restore Interface](/restore.png)

## 备份内容

- 所有服务器和凭证（密码、私钥）
- 密钥链中的 SSH 密钥
- 端口转发配置
- 2FA/TOTP 密钥
- 应用程序设置
- Cloudflare API 令牌

## 密码要求

| 要求 | 描述 |
|-------------|-------------|
| 长度 | 至少 10 个字符 |
| 大写字母 | 包含大写字母 |
| 小写字母 | 包含小写字母 |
| 数字 | 至少包含一个数字 |
| 特殊字符 | 包含特殊字符 |

> ⚠️ **警告：** 我们无法恢复您的密码。如果您忘记密码，您的备份将永久无法访问。

## 本地备份

将加密备份文件保存到您的计算机。

### 创建本地备份

1. 转到 **设置** → 点击 **"创建备份"**
2. 选择 **本地** 标签（文件夹图标）
3. 输入 **强密码**（10+ 个字符）
4. 确认密码
5. 点击 **"创建备份"**
6. 选择保存 `.marix` 文件的位置
7. 安全存储此文件

### 从本地备份恢复

1. 转到 **设置** → 点击 **"恢复备份"**
2. 选择 **本地** 标签
3. 点击 **"选择文件"** 并选择您的 `.marix` 备份文件
4. 输入创建备份时使用的 **密码**
5. 点击 **"恢复"**
6. 应用程序重启并恢复所有数据

## Google Drive

将备份同步到 Google Drive。

### 连接

1. 选择 **Google Drive** 标签
2. 点击 **"连接"**
3. 登录您的 Google 账户
4. 授权 Marix 权限
5. 您将看到"已连接"和您的邮箱

### 创建备份

1. 连接后，输入强密码
2. 确认密码
3. 点击 **"创建备份"**
4. 状态显示："备份创建成功"

### 恢复

1. 如果已连接，您的账户会被记住
2. 如果存在备份，您将看到"上次备份：[日期]"
3. 输入密码
4. 点击 **"恢复"**

## GitHub

将备份存储在私有 GitHub Gist 中。

### 连接

1. 选择 **GitHub** 标签
2. 点击 **"连接"**
3. 出现 **设备代码**（例如 `ABCD-1234`）
4. 访问：https://github.com/login/device
5. 输入代码
6. 授权 Marix

### 创建备份

1. 输入强密码
2. 确认密码
3. 点击 **"创建备份"**
4. 备份存储为私有 Gist

### 恢复

1. 如果已连接，您的账户会被记住
2. 如果存在备份，您将看到"上次备份：[日期]"
3. 输入密码
4. 点击 **"恢复"**

### 备份在哪里？

访问 https://gist.github.com → 您的私有 gist → 查找 "marix-backup"

## GitLab

将备份存储在 GitLab Snippet 中。

### 连接

1. 选择 **GitLab** 标签
2. 点击 **"连接"**
3. 登录 GitLab
4. 授权 Marix

### 创建备份

1. 输入强密码
2. 确认密码
3. 点击 **"创建备份"**
4. 备份存储为私有 Snippet

### 恢复

1. 如果已连接，您的账户会被记住
2. 如果存在备份，您将看到"上次备份：[日期]"
3. 输入密码
4. 点击 **"恢复"**

## Box.net

将备份存储在 Box.net 云存储中。

### 连接

1. 选择 **Box.net** 标签
2. 点击 **"连接到 Box.net"**
3. 登录您的 Box.net 账户
4. 授权 Marix

### 创建备份

1. 输入强密码
2. 确认密码
3. 点击 **"创建备份"**

### 恢复

1. 如果已连接，您的账户会被记住
2. 如果存在备份，您将看到"上次备份：[日期]"
3. 输入密码
4. 点击 **"恢复"**

## OneDrive

将备份同步到 Microsoft OneDrive。

### 连接

1. 选择 **OneDrive** 标签
2. 点击 **"连接"**
3. 登录您的 Microsoft 账户
4. 授权 Marix 权限
5. 您将看到"已连接"和您的邮箱

### 创建备份

1. 连接后，输入强密码
2. 确认密码
3. 点击 **"创建备份"**
4. 状态显示："备份创建成功"

### 恢复

1. 如果已连接，您的账户会被记住
2. 如果存在备份，您将看到"上次备份：[日期]"
3. 输入密码
4. 点击 **"恢复"**

## 提供商对比

| 提供商 | 存储位置 | 优点 | 缺点 |
|----------|------------------|------|------|
| **本地** | 您的计算机 | 完全控制，离线 | 必须手动管理文件 |
| **Google Drive** | Google 云端 | 自动同步，广泛使用 | 需要 Google 账户 |
| **OneDrive** | Microsoft 云端 | 与 Windows 集成 | 需要 Microsoft 账户 |
| **GitHub** | GitHub Gist | 免费，版本控制 | 需要 GitHub 账户 |
| **GitLab** | GitLab Snippet | 免费，可自托管 | 需要 GitLab 账户 |
| **Box.net** | Box.net 云端 | 企业友好 | 需要 Box 账户 |

## 最佳实践

1. **使用不同的密码** 用于不同的提供商
2. **将密码存储** 在密码管理器中
3. **定期测试恢复** 以确保备份有效
4. **保留本地备份** 作为备选方案
5. **不要分享** 备份文件 - 它们包含敏感数据
6. **添加新服务器后** 定期更新备份
