# 命令片段

代码片段是可重用的命令模板，帮助您在 SSH 终端中快速执行常用命令。

## 命令片段界面

![Command Snippets Interface](/snippets.png)

---

## 概述

代码片段功能结合了 **命令模板** 和可选的 **键盘快捷键**：

- **保存常用命令** 以便快速访问
- **分配热键**（Ctrl+Shift+Key 或 Cmd+Shift+Key）即时执行
- **按类别组织**（系统、Docker、Git、网络等）
- **基于范围的可见性** - 全局、每主机或每组

---

## 访问代码片段

### 代码片段面板

连接到 SSH 终端时，**代码片段面板** 出现在右侧：

- **搜索** - 按名称、命令或标签查找代码片段
- **按类别筛选** - 点击类别图标筛选
- **点击插入** - 点击任何代码片段插入其命令
- **折叠/展开** - 切换面板可见性

### 代码片段管理器

从侧边栏菜单访问以：

- 查看所有按范围组织的代码片段
- 添加、编辑或删除代码片段
- 管理热键分配

---

## 创建代码片段

1. 从侧边栏打开 **代码片段管理器**
2. 点击 **添加代码片段** 按钮
3. 填写表单：

| 字段 | 描述 |
|-------|-------------|
| 名称 | 简短描述性标题 |
| 命令 | Shell 命令 |
| 类别 | 从预定义或"自定义"中选择 |
| 范围 | 全局、主机或组 |
| 热键 | 可选的单个字符 |
| 描述 | 解释命令做什么 |
| 标签 | 用于搜索的关键词 |

### 示例代码片段

| 名称 | 命令 | 类别 | 热键 |
|------|---------|----------|--------|
| 磁盘使用情况 | `df -h` | 系统 | D |
| 列出所有 Docker | `docker ps -a` | Docker | P |
| Git 状态 | `git status` | Git | G |
| 检查端口 | `netstat -tulpn` | 网络 | N |
| 追踪日志 | `tail -f /var/log/syslog` | 系统 | L |

---

## 使用热键

### 键盘快捷键

| 平台 | 快捷键格式 |
|----------|-----------------|
| **Windows/Linux** | `Ctrl + Shift + [键]` |
| **macOS** | `Cmd + Shift + [键]` |

### 保留键

某些键已保留，无法使用：

| 键 | 保留用于 |
|-----|--------------|
| A | 添加新主机 |
| C | 复制 |
| L | 切换局域网传输 |
| O | 切换终端/SFTP |
| T | 本地终端 |
| V | 粘贴 |

---

## 类别

| 图标 | 类别 | 用于 |
|------|----------|---------|
| 🖥️ | 系统 | 操作系统命令、服务、日志 |
| 🐳 | Docker | 容器管理 |
| 📦 | Git | 版本控制 |
| 🌐 | 网络 | 端口、连接、DNS |
| 📁 | 文件 | 文件操作 |
| 🗄️ | 数据库 | 数据库命令 |
| ✨ | 自定义 | 其他任何内容 |

---

## 范围级别

### 全局范围
在 **所有** SSH 连接上可见。最适合通用命令。

### 主机范围
仅在 **特定服务器** 上可见。最适合服务器特定命令。

### 组范围
在 **特定组** 中的所有服务器上可见。最适合环境特定命令。

---

## 提示与最佳实践

1. **使用变量** - 为可变部分留占位符：`tail -f [LOG_PATH]`
2. **链式命令** - 组合多个命令：`cd /var/www && git pull && systemctl restart app`
3. **使用标签组织** - 添加如 `prod`、`dev`、`urgent` 等标签便于筛选
4. **备份您的代码片段** - 包含在加密的 .marix 备份中

---

## 数据存储

- 本地存储在浏览器 localStorage 中
- 包含在加密备份（.marix 文件）中
- 与 Google Drive 同步（如果启用）
- 没有显式备份操作不会存储到云端

---

## 故障排除

| 问题 | 解决方案 |
|-------|----------|
| 热键不工作 | 检查冲突，确保终端有焦点 |
| 代码片段不出现 | 检查范围是否匹配当前连接 |
| 命令不执行 | 检查终端状态、权限问题 |
