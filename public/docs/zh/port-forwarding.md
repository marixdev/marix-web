# 端口转发（SSH 隧道）

SSH 隧道通过 SSH 连接安全地路由流量。

## 端口转发界面

![Port Forwarding Interface](/portfoward.png)

## 端口转发类型

| 类型 | 方向 | 使用场景 |
|------|-----------|----------|
| **本地** | 远程 → 本地 | 通过本地端口访问远程服务 |
| **远程** | 本地 → 远程 | 将本地服务暴露给远程网络 |
| **动态** | SOCKS 代理 | 通过 SSH 创建 SOCKS 代理 |

## 打开端口转发

在侧边栏中点击 **"端口转发"**。

## 创建端口转发

### 步骤 1：打开对话框
点击 **"添加转发"** 按钮

### 步骤 2：配置

| 字段 | 描述 | 示例 |
|-------|-------------|---------|
| 名称 | 描述性名称 | "MySQL 到本地" |
| 类型 | 本地、远程或动态 | 本地 |
| 服务器 | 用于隧道的 SSH 服务器 | 我的 VPS |
| 本地主机 | 本地绑定地址 | 127.0.0.1 |
| 本地端口 | 本地端口号 | 3307 |
| 远程主机 | 远程目标 | 127.0.0.1 |
| 远程端口 | 远程端口 | 3306 |

### 步骤 3：保存
点击 **"添加"** 或 **"保存"**

## 使用案例示例

### 本地转发：访问远程 MySQL

从本地机器访问服务器的 MySQL 数据库：

| 设置 | 值 |
|---------|-------|
| 类型 | 本地 |
| 本地 | 127.0.0.1:3307 |
| 远程 | 127.0.0.1:3306 |

**使用方法：** 连接到 `localhost:3307` 访问服务器的 MySQL。

### 远程转发：暴露本地应用

让服务器访问您的本地开发服务器：

| 设置 | 值 |
|---------|-------|
| 类型 | 远程 |
| 本地 | 127.0.0.1:3000 |
| 远程 | 0.0.0.0:8080 |

**使用方法：** 服务器的 8080 端口连接到您的 localhost:3000。

### 动态：SOCKS 代理

创建一个 SOCKS5 代理通过服务器浏览：

| 设置 | 值 |
|---------|-------|
| 类型 | 动态 |
| 本地 | 127.0.0.1:1080 |

**使用方法：** 配置应用使用 `localhost:1080` 的 SOCKS5 代理。

## 管理端口转发

### 启动
1. 在列表中找到转发
2. 点击 **启动** 按钮（▶）
3. 状态变为"已连接"

### 停止
1. 找到正在运行的转发
2. 点击 **停止** 按钮（■）
3. 状态变为"已断开"

### 编辑
1. 如果正在运行，**停止** 转发
2. 点击 **编辑** 按钮（铅笔）
3. 修改设置
4. 点击 **保存**

### 删除
1. 如果正在运行，停止转发
2. 点击 **删除** 按钮（垃圾桶）
3. 确认删除

## 监控状态

列表显示：
- **状态指示器**：绿色 = 已连接，红色 = 错误
- **连接数**：活动连接数
- **传输字节**：入/出流量

## 常见使用场景

| 服务 | 本地端口 | 远程端口 | 类型 |
|---------|------------|-------------|------|
| MySQL | 3307 | 3306 | 本地 |
| PostgreSQL | 5433 | 5432 | 本地 |
| Redis | 6380 | 6379 | 本地 |
| MongoDB | 27018 | 27017 | 本地 |
| Web 应用 | 8080 | 80 | 本地 |
| Jupyter | 8889 | 8888 | 本地 |

## 故障排除

### 端口已被占用
- 选择不同的本地端口
- 检查是否有其他应用程序使用该端口
- 停止冲突的服务

### 连接被拒绝
- 验证远程服务正在运行
- 检查服务器上的防火墙
- 确保远程主机/端口正确

### 隧道断开
- 检查 SSH 连接稳定性
- 服务器可能有超时设置
- 考虑使用保活
