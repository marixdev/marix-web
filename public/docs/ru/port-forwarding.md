# Переадресация портов (SSH-туннели)

SSH-туннели безопасно маршрутизируют трафик через SSH-подключение.

## Интерфейс переадресации портов

![Интерфейс переадресации портов](/portfoward.png)

## Типы переадресации портов

| Тип | Направление | Применение |
|-----|-------------|------------|
| **Локальная** | Удалённый → Локальный | Доступ к удалённому сервису через локальный порт |
| **Удалённая** | Локальный → Удалённый | Открытие локального сервиса для удалённой сети |
| **Динамическая** | SOCKS-прокси | Создание SOCKS-прокси через SSH |

## Открытие переадресации портов

Нажмите **«Переадресация портов»** в боковой панели.

## Создание переадресации порта

### Шаг 1: Открытие диалога
Нажмите кнопку **«Добавить переадресацию»**

### Шаг 2: Настройка

| Поле | Описание | Пример |
|------|----------|--------|
| Имя | Описательное имя | «MySQL на localhost» |
| Тип | Локальная, Удалённая или Динамическая | Локальная |
| Сервер | SSH-сервер для туннелирования | My VPS |
| Локальный хост | Локальный адрес привязки | 127.0.0.1 |
| Локальный порт | Номер локального порта | 3307 |
| Удалённый хост | Удалённое назначение | 127.0.0.1 |
| Удалённый порт | Удалённый порт | 3306 |

### Шаг 3: Сохранение
Нажмите **«Добавить»** или **«Сохранить»**

## Примеры использования

### Локальная переадресация: Доступ к удалённому MySQL

Доступ к базе данных MySQL сервера с вашей локальной машины:

| Настройка | Значение |
|-----------|----------|
| Тип | Локальная |
| Локальный | 127.0.0.1:3307 |
| Удалённый | 127.0.0.1:3306 |

**Использование:** Подключитесь к `localhost:3307` для доступа к MySQL сервера.

### Удалённая переадресация: Открытие локального приложения

Позвольте серверу получить доступ к вашему локальному серверу разработки:

| Настройка | Значение |
|-----------|----------|
| Тип | Удалённая |
| Локальный | 127.0.0.1:3000 |
| Удалённый | 0.0.0.0:8080 |

**Использование:** Порт 8080 сервера подключается к вашему localhost:3000.

### Динамическая: SOCKS-прокси

Создание SOCKS5-прокси для просмотра через сервер:

| Настройка | Значение |
|-----------|----------|
| Тип | Динамическая |
| Локальный | 127.0.0.1:1080 |

**Использование:** Настройте приложения на использование SOCKS5-прокси на `localhost:1080`.

## Управление переадресациями портов

### Запуск
1. Найдите переадресацию в списке
2. Нажмите кнопку **Запуск** (▶)
3. Статус изменится на «Подключено»

### Остановка
1. Найдите работающую переадресацию
2. Нажмите кнопку **Стоп** (■)
3. Статус изменится на «Отключено»

### Редактирование
1. **Остановите** переадресацию, если она работает
2. Нажмите кнопку **Редактировать** (карандаш)
3. Измените настройки
4. Нажмите **Сохранить**

### Удаление
1. Остановите переадресацию, если работает
2. Нажмите кнопку **Удалить** (корзина)
3. Подтвердите удаление

## Мониторинг статуса

Список показывает:
- **Индикатор статуса**: Зелёный = подключено, Красный = ошибка
- **Количество подключений**: Активные подключения
- **Переданные байты**: Входящий/исходящий трафик

## Распространённые случаи использования

| Сервис | Локальный порт | Удалённый порт | Тип |
|--------|----------------|----------------|-----|
| MySQL | 3307 | 3306 | Локальная |
| PostgreSQL | 5433 | 5432 | Локальная |
| Redis | 6380 | 6379 | Локальная |
| MongoDB | 27018 | 27017 | Локальная |
| Web App | 8080 | 80 | Локальная |
| Jupyter | 8889 | 8888 | Локальная |

## Устранение неполадок

### Порт уже используется
- Выберите другой локальный порт
- Проверьте, не использует ли порт другое приложение
- Остановите конфликтующие сервисы

### Подключение отклонено
- Убедитесь, что удалённый сервис запущен
- Проверьте файрвол на сервере
- Убедитесь в правильности удалённого хоста/порта

### Туннель разрывается
- Проверьте стабильность SSH-подключения
- Сервер может иметь настройки тайм-аута
- Рассмотрите использование keep-alive
